#
# Executes commands at the start of an interactive session.
#
# Author:
#  Yu Sawai
#

## -------------------------------------------------------------------------------
## Prezto                                                                      
## -------------------------------------------------------------------------------
if [[ -s "${ZDOTDIR:-$HOME}/.zprezto/init.zsh" ]]; then
  source "${ZDOTDIR:-$HOME}/.zprezto/init.zsh"
fi

## -------------------------------------------------------------------------------
## oh-my-zsh
## -------------------------------------------------------------------------------
# source $HOME/.omzsh_load

## -------------------------------------------------------------------------------
## zshuery                                                                      
## -------------------------------------------------------------------------------
# source ${HOME}/.zshuery/zshuery.sh
# load_defaults
# load_aliases
# load_correction


#-------------------------------------------------------------------------------
# other settings                                                                   
#-------------------------------------------------------------------------------
setopt noautoremoveslash
setopt list_packed
setopt auto_pushd
export TERM=xterm-256color
export EDITOR='vim'
setopt nolistbeep
export LESS='-R'
export LESSOPEN='| /opt/local/bin/src-hilite-lesspipe.sh %s'
zstyle ':completion:*' list-colors ${(s.:.)LS_COLORS}
## tmuxinator completion
[[ -s $HOME/.tmuxinator/scripts/tmuxinator ]] && source $HOME/.tmuxinator/scripts/tmuxinator
alias sourcez='source ~/.zprofile && source ~/.zshrc'
alias ls="gls --color=auto"
# eval `gdircolors -b $HOME/dotfiles/common/dircolors.256dark`

## my naist wlan login script
alias loginwlan="python /Applications/Scripts/login_naist.py"
alias backupnow="tmutil startbackup"
alias enabletm="sudo tmutil enable"
alias disabletm="sudo tmutil disable"
alias t="tmux a"

## autojump
[[ -s ~/.autojump/etc/profile.d/autojump.zsh ]] && source ~/.autojump/etc/profile.d/autojump.zsh

#-------------------------------------------------------------------------------
# Keys                                                                         
# historical backward/forward search with linehead string binded to ^P/^N
#-------------------------------------------------------------------------------
bindkey -e
bindkey "\e[Z" reverse-menu-complete
bindkey -a 'q' push-line
bindkey -a 'H' run-help
autoload history-search-end
zle -N history-beginning-search-backward-end history-search-end
zle -N history-beginning-search-forward-end history-search-end
bindkey "^P" history-beginning-search-backward-end
bindkey "^N" history-beginning-search-forward-end
  
## Command history configuration
HISTFILE=~/.zsh_history
HISTSIZE=10000
SAVEHIST=10000
setopt hist_ignore_dups     # ignore duplication command history list
setopt share_history        # share command history data

## Virtualenv
# workon cpython273
